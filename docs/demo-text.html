<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>FaceJS Text demo</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous" />
    <script type="text/javascript" src="https://demo.picarioxpo.com/facejs/facelib-0-9-1.js"> </script>
    <style>
        body {
            min-height: 75rem;
            padding-top: 4.5rem;
        }
        .outline {
            width: 410px;
            height: 410px;
            border: 4px gray solid;
            margin: 5px;
        }
        .border {
            border: 1px black solid;
        }
    </style>

</head>

<body>

    <nav class="navbar navbar-expand-lg bnavbar-light fixed-top bg-light">
        <a class="navbar-brand" href="#">
            <img src=logo125.png />
        </a>
    </nav>

    <main role="main" class="container">
        <h3>FaceJS <span class="text-muted">Text Example </span></h3>
        <input type="text" id="textinput" value="Hello World" onchange="update();" />
        <select id="fontname" onchange="update();">
            <option value="Georgia" selected>Georgia</option>
            <option value="Courier New">Courier New</option>
            <option value="Helvetica">Helvetica</option>
        </select>
        <select id="sizemode" onchange="update();">
            <option value="0" selected>Normal</option>
            <option value="2">Surface Map</option>
            <option value="3">Surface Fill</option>
            <option value="4">Surface Fit</option>
        </select>
          
        <label for="repeat">Repeat</label>
        <input type="checkbox" id="repeat" value="1" name="repeat" onchange="update();" />
        <label for="bold">Bold</label>
        <input type="checkbox" id="bold" value="1" name="bold" onchange="update();" />
        <label for="italic">Italic</label>
        <input type="checkbox" id="italic" value="1" name="italic" onchange="update();"/>
        
        <br>
        <canvas id="canvas" width="800px" height="800px"></canvas>
        <div id="info"></div>
    </main>

        <!-- IsSupported detection in seperate script tag, in case main script fails. -->
        <script>
            if (!FaceJS.isSupported) {
                alert("FaceJS is not supported. Please use a modern browser.")
            }
        </script>

    <script>

        var container;
        var ft;


        var data = [
            { id: "product1", refId: "1354_flowpack.pfs", logoObject: 1 },
            { id: "product2", refId: "Baseball-cap.pfs", logoObject: 2 }
        ];

        let activeScene = 1;

        let myscene = data[activeScene].refId;
        let objectId = data[activeScene].logoObject;

        //Initialization
        async function start() {
            await FaceJS.init("https://demo.picarioxpo.com/", {
                canvas: "canvas",
                autorender: true,
                scene: myscene
            });


            container = FaceJS.getContainer("canvas");

            //default startup values of the Text demo.
            container.objects[objectId].sizeMode = 0;
            container.objects[objectId].repeat = false;
            ft = container.objects[objectId].setText("Hello World");
            ft.font = "Georgia";

            //Enable moving the text
            container.handleTextureMove = true;
            //Change this to enable custom zooming
            container.handleTextureResize = false;
        }

        //
        start();

        function update() {
            if (container) {
                ft.font = document.getElementById("fontname").value;
                ft.text = document.getElementById("textinput").value;
                ft.bold = document.getElementById("bold").checked;
                ft.italic = document.getElementById("italic").checked;
                container.objects[objectId].sizeMode = parseInt(document.getElementById("sizemode").value);
                container.objects[objectId].repeat = document.getElementById("repeat").checked;
                displaySizes();
            }
        }

    

        //Display's the sizing information used
        function displaySizes() {
            let info = "";
            info += "Original scene width (px) : " + container.sceneInfo.width + "<br>";
            info += "Original scene height (px) : " + container.sceneInfo.height + "<br>";
            info += "Display scene width (px): " + container.canvas.width + "<br>";
            info += "Display scene height (px): " + container.canvas.height + "<br>";

            info += "Object id : " + objectId + "<br>";
            info += "Surface width (mm): " + container.objects[objectId].surfaceWidth + "<br>";
            info += "Surface height (mm): " + container.objects[objectId].surfaceHeight + "<br>";
            info += "Text Canvas width (px): " + ft.canvas.width + "<br>";
            info += "Text Canvas height (px): " + ft.canvas.height + "<br>";
            info += "Applied texture width (mm): " + container.objects[objectId].width + "<br>";
            info += "Applied texture height (mm): " + container.objects[objectId].height + "<br>";
            document.getElementById("info").innerHTML = info;
        }

    </script>

</body>

</html>